name: Sync Repos

on:
  push:
    branches:
      - main # or the branch you want to sync from

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout source repository
        uses: actions/checkout@v4 # Use a recent version of checkout

      - name: Push to destination repository
        run: |
          git config --global user.email "marquis.harden.07@cnu.edu"
          git config --global user.name "marquis harden"
          # Clone the destination repo using the PAT for authentication
          git clone https://${{ secrets.GIT_LAB_TOKEN_2 }}@student-gitlab.sec.cnu.edu
          cd https://student-gitlab.sec.cnu.edu/marquis.harden.07/moribunddungeon.git
          # Copy files from source to destination directory (adjust paths as needed)
          cp -r ../* .
          git add .
          git commit -m "Auto-sync with source repository" || echo "No changes to commit"
          git push origin main # or the destination branch
